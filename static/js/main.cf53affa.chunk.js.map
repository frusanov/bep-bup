{"version":3,"sources":["components/Shroom01.jsx","components/Pixie.jsx","components/Shroom02.jsx","components/Shroom03.jsx","components/Plants.jsx","components/Shroom04.jsx","components/Shroom05.jsx","components/Pixie2.jsx","App.js","utils/LoadersObserver.js","index.js"],"names":["Shroom01","props","observed","loadersObserver","addLoader","gltf","useLoader","GLTFLoader","uriPrefix","watchStatus","id","object","scene","Pixie","useState","rotata","setRotata","useEffect","lastRotata","intertval","setInterval","clearInterval","rotation","Shroom02","Shroom03","Plants","Shroom04","Shroom05","Pixie2","this","loaders","onLoad","candidate","find","loader","loaded","progress","push","xhr","console","log","target","readyState","checkIsDone","isDone","forEach","Plane","color","RoundedBox","receiveShadow","castShadow","smoothness","radius","envMapIntensity","Hack","zoom","set","useFrame","state","delta","camera","fov","THREE","damp","to","step","x","y","z","position","lookAt","updateProjectionMatrix","setOnLoad","setTimeout","$loading","window","document","querySelector","style","opacity","display","App","shadows","attach","args","intensity","fallback","scale","Text","fontSize","maxWidth","lineHeight","letterSpacing","textAlign","font","anchorX","anchorY","Math","PI","Environment","preset","BakeShadows","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.cf53affa.chunk.js","sourcesContent":["import { useLoader } from '@react-three/fiber'\nimport react from 'react'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { loadersObserver, uriPrefix } from '../App'\n\nexport default function Shroom01(props) {\n  const observed = loadersObserver.addLoader('Shroom01')\n  const gltf = useLoader(GLTFLoader, uriPrefix + '/models/shroom-1.gltf', null, loadersObserver.watchStatus(observed.id))\n\n  return <primitive object={gltf.scene} {...props} />\n}\n","import { useLoader } from '@react-three/fiber'\nimport { useEffect, useState } from 'react'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { loadersObserver, uriPrefix } from '../App'\n\nexport default function Pixie(props) {\n  const observed = loadersObserver.addLoader('Pixie')\n  const gltf = useLoader(GLTFLoader, uriPrefix + '/models/pixie.gltf', null, loadersObserver.watchStatus(observed.id))\n\n  const [rotata, setRotata] = useState(0)\n\n  useEffect(() => {\n    let lastRotata = 0\n\n    const intertval = setInterval(() => {\n      lastRotata = lastRotata + 0.01\n      setRotata(lastRotata)\n    }, 1000 / 60)\n\n    return () => clearInterval(intertval)\n  }, [])\n\n  return (\n    <mesh rotation={[0, rotata, -0.02]} {...props}>\n      <primitive object={gltf.scene} />\n    </mesh>\n  )\n}\n","import { useLoader } from '@react-three/fiber'\nimport react from 'react'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { loadersObserver, uriPrefix } from '../App'\n\nexport default function Shroom02(props) {\n  const observed = loadersObserver.addLoader('Shroom02')\n  const gltf = useLoader(GLTFLoader, uriPrefix + '/models/shroom-2.gltf', null, loadersObserver.watchStatus(observed.id))\n\n  return <primitive object={gltf.scene} {...props} />\n}\n","import { useLoader } from '@react-three/fiber'\nimport react from 'react'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { loadersObserver, uriPrefix } from '../App'\n\nexport default function Shroom03(props) {\n  const observed = loadersObserver.addLoader('Shroom03')\n  const gltf = useLoader(GLTFLoader, uriPrefix + '/models/shroom-3.gltf', null, loadersObserver.watchStatus(observed.id))\n\n  return <primitive object={gltf.scene} {...props} />\n}\n","import { useLoader } from '@react-three/fiber'\nimport react from 'react'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { loadersObserver, uriPrefix } from '../App'\n\nexport default function Plants(props) {\n  const observed = loadersObserver.addLoader('Plants')\n  const gltf = useLoader(GLTFLoader, uriPrefix + '/models/plants.gltf', null, loadersObserver.watchStatus(observed.id))\n\n  return <primitive object={gltf.scene} {...props} />\n}\n","import { useLoader } from '@react-three/fiber'\nimport react from 'react'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { loadersObserver, uriPrefix } from '../App'\n\nexport default function Shroom04(props) {\n  const observed = loadersObserver.addLoader('Shroom04')\n  const gltf = useLoader(GLTFLoader, uriPrefix + '/models/shroom-4.gltf', null, loadersObserver.watchStatus(observed.id))\n\n  return <primitive object={gltf.scene} {...props} />\n}\n","import { useLoader } from '@react-three/fiber'\nimport react from 'react'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { loadersObserver, uriPrefix } from '../App'\n\nexport default function Shroom05(props) {\n  const observed = loadersObserver.addLoader('Shroom05')\n  const gltf = useLoader(GLTFLoader, uriPrefix + '/models/shroom-5.gltf', null, loadersObserver.watchStatus(observed.id))\n\n  return <primitive object={gltf.scene} {...props} />\n}\n","import { useLoader } from '@react-three/fiber'\nimport { useEffect, useState } from 'react'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { loadersObserver, uriPrefix } from '../App'\n\nexport default function Pixie2(props) {\n  const observed = loadersObserver.addLoader('Pixie2')\n  const gltf = useLoader(GLTFLoader, uriPrefix + '/models/pixie.gltf?2', null, loadersObserver.watchStatus(observed.id))\n\n  return (\n    <mesh {...props}>\n      <primitive object={gltf.scene} />\n    </mesh>\n  )\n}\n","// https://twitter.com/marcinignac/status/1288418586709630976\n\nimport * as THREE from 'three'\nimport React, { useState, useRef, Suspense, useEffect } from 'react'\nimport { Canvas, useFrame, useLoader } from '@react-three/fiber'\nimport { softShadows, BakeShadows, RoundedBox, Environment, useCursor, ContactShadows } from '@react-three/drei'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { Text, CameraShake } from '@react-three/drei'\nimport Shroom01 from './components/Shroom01'\nimport Pixie from './components/Pixie'\nimport Shroom02 from './components/Shroom02'\nimport Shroom03 from './components/Shroom03'\nimport Plants from './components/Plants'\nimport Shroom04 from './components/Shroom04'\nimport Shroom05 from './components/Shroom05'\nimport LoadersObserver from './utils/LoadersObserver'\nimport Pixie2 from './components/Pixie2'\n\nexport const isProd = process.env.NODE_ENV === 'production'\nexport const uriPrefix = isProd ? '/bep-bup' : ''\n// Soft shadows are expensive, uncomment and refresh when it's too slow\n// softShadows()\n\nexport const loadersObserver = new LoadersObserver()\n\nfunction damp(target, to, step, delta, v = new THREE.Vector3()) {\n  if (target instanceof THREE.Vector3) {\n    target.x = THREE.MathUtils.damp(target.x, to[0], step, delta)\n    target.y = THREE.MathUtils.damp(target.y, to[1], step, delta)\n    target.z = THREE.MathUtils.damp(target.z, to[2], step, delta)\n  }\n}\n\nfunction Plane({ color, ...props }) {\n  return (\n    <RoundedBox receiveShadow castShadow smoothness={10} radius={0.015} {...props}>\n      <meshStandardMaterial color={color} envMapIntensity={0.5} />\n    </RoundedBox>\n  )\n}\n\nfunction Hack() {\n  const [zoom, set] = useState(true)\n\n  useFrame((state, delta) => {\n    const step = 1\n    state.camera.fov = THREE.MathUtils.damp(state.camera.fov, zoom ? 8 : 50, step, delta)\n\n    damp(state.camera.position, [zoom ? 25 : 10, zoom ? 1 : 2, zoom ? 0 : 10], step, delta)\n\n    state.camera.lookAt(0, 2, 0)\n    state.camera.updateProjectionMatrix()\n  })\n\n  useEffect(() => {\n    loadersObserver.setOnLoad(() => {\n      setTimeout(() => {\n        const $loading = window.document.querySelector('#loading')\n\n        $loading.style.opacity = '0'\n        set(false)\n\n        setTimeout(() => {\n          $loading.style.display = 'none'\n        }, 1000)\n      }, 1000)\n    })\n  })\n\n  return <></>\n}\n\nexport default function App() {\n  return (\n    <Canvas shadows camera={{ position: [25, 1, 0], fov: 2 }}>\n      <color attach=\"background\" args={['#a2b9e7']} />\n      <Hack />\n      <directionalLight position={[0, 8, 5]} castShadow intensity={1} shadow-camera-far={70} />\n      <Suspense fallback={null}>\n        <Shroom01 scale={0.03} position={[1, -2, 3]} castShadow />\n        <Plants scale={0.2} position={[-2, -3, 0]} castShadow />\n        <Shroom02 scale={0.02} position={[-0.8, -1.5, -0.5]} castShadow />\n        <Shroom03 scale={0.02} position={[1, -2, -0.5]} castShadow />\n        <Shroom04 scale={0.04} position={[15, -4.2, -3]} castShadow />\n        <Shroom05 scale={0.03} position={[0, -3, 0]} castShadow />\n        <Pixie scale={0.1} position={[0.05, -1.1, 0]} />\n        <Pixie2 scale={20} position={[-60, -180, -40]} rotation={[0, -1.2, 0.25]} />\n        <Text\n          position={[-21.5, 5, -20]}\n          color={'#ff0f0f'}\n          fontSize={4}\n          maxWidth={20}\n          lineHeight={1}\n          letterSpacing={0.02}\n          textAlign={'left'}\n          font=\"https://fonts.gstatic.com/s/raleway/v14/1Ptrg8zYS_SKggPNwK4vaqI.woff\"\n          anchorX=\"center\"\n          anchorY=\"middle\">\n          С Днем Рождения! Бепа! Бупа!\n        </Text>\n        <group position={[0, -0.9, -3]}>\n          <Plane color=\"#ea5b3f\" rotation-x={-Math.PI / 2} position-z={2} scale={[5, 40, 0.2]} />\n          <Plane color=\"#f4ae00\" rotation-x={-Math.PI / 2} position={[0, 0, 0]} scale={[4.2, 0.2, 4]} />\n        </group>\n        <Environment preset=\"apartment\" />\n        <BakeShadows />\n      </Suspense>\n    </Canvas>\n  )\n}\n","class LoadersObserver {\n  constructor() {\n    this.loaders = []\n    this.onLoad = null\n  }\n\n  setOnLoad(onLoad) {\n    this.onLoad = onLoad\n  }\n\n  addLoader(id) {\n    const candidate = this.loaders.find((loader) => loader.id === id)\n\n    if (candidate) return candidate\n\n    const loader = {\n      id,\n      loaded: false,\n      progress: 0\n    }\n    this.loaders.push(loader)\n\n    return loader\n  }\n\n  watchStatus(id) {\n    return (xhr) => {\n      const loader = this.loaders.find((loader) => loader.id === id)\n\n      console.log(id, 'readyState', xhr.target.readyState)\n\n      if (xhr.target.readyState === 4) {\n        loader.loaded = true\n        this.checkIsDone()\n      }\n    }\n  }\n\n  checkIsDone() {\n    let isDone = true\n\n    this.loaders.forEach((loader) => {\n      isDone = isDone && loader.loaded\n    })\n\n    console.log('checkIsDone', isDone)\n\n    if (isDone && this.onLoad) this.onLoad()\n  }\n}\n\nexport default LoadersObserver\n","import ReactDOM from 'react-dom'\nimport React from 'react'\nimport App from './App'\nimport './styles.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}